<div class="top-margin"></div>

<!-- {{ diagnostic }} -->

<div class="card">
  <div class="card-block">
    <noe-section [showAdd]="false" (onEdit)="onEditIntro()">
      <div class="row">
        <div class="col">
          <img class="rounded-circle profile-avatar img-thumbnail mx-auto d-block" [src]="profile.avatar" />
        </div>
      </div>
      <div class="row">
        <div class="col">
          <h4 class="profile-name">{{ profile.firstname }} {{ profile.lastname }}</h4>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <h6 class="current-grade">{{ profile.grade }} Student</h6>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <h6 class="current-school-name">{{ profile.school }}</h6>
        </div>
      </div>

      <hr class="mt-3">

      <div class="table-responsive">
        <table class="table borderless">
          <tbody>
            <tr>
              <td class="profile-property">
                <span class="property-title">Email:</span>{{ profile.email }}
              </td>
              <td class="profile-property">
                <span class="property-title">Phone:</span>{{ profile.phone }}
              </td>
              <td class="profile-property">
                <span class="property-title">Applying:</span>{{ profile.applying }}
              </td>
            </tr>
            <tr>
              <td class="profile-property">
                <span class="property-title">Birthday:</span>{{ profile.birthday | date:'shortDate' }}
              </td>
              <td class="profile-property">
                <span class="property-title">Gender:</span>{{ profile.gender | capitalize }}
              </td>
              <td class="profile-property">
                <span class="property-title">Country:</span>{{ profile.country }}
              </td>
            </tr>
            <tr>
              <td class="profile-property">
                <span class="property-title">Annual budget:</span>${{ profile.budget }}
              </td>
              <td class="profile-property">
                <span class="property-title">GPA:</span>{{ profile.gpa }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <hr class="mt-3">

      <div class="row">
        <div class="col">
          <p>{{ profile.introduction }}</p>
        </div>
      </div>
    </noe-section>
  </div>

  <noe-intro-dialog #introDialog></noe-intro-dialog>
</div>

<div class="card">
  <div class="card-block">
    <noe-section [header]="'More Self Introduction'" [showAdd]="false" (onEdit)="onEditOptionalMaterial()">
      <hr class="mt-3">

      <div class="row">
        <div class="col">
          <div *ngFor="let optionalMaterial of optionalMaterials">
            <img [src]="fileUrlFrom(optionalMaterial)" class="passport-scan rounded pull-left" alt="Optional Material">
          </div>
          <div *ngIf="!hasOptionalMaterials">Add or link media materials for self introduction.</div>
        </div>
      </div>
    </noe-section>

    <noe-applying-file-edit-dialog #optionalMaterialEditDialog
          [title]="'Edit more materials'"
          [type]="'optional-materials'">
    </noe-applying-file-edit-dialog>
  </div>
</div>

<div class="card">
  <div class="card-block">
    <noe-section [header]="'School Preferred'" [showAdd]="false" (onEdit)="onEditSchoolPreferred()">
      <hr class="mt-3">

      <div class="table-responsive">
        <table class="table borderless">
          <tbody>
            <tr>
              <td class="profile-property">
                <span class="property-title">Location:</span>{{ profile.preferredSchoolLocation }}
              </td>
              <td class="profile-property">
                <span class="property-title">Type:</span>{{ profile.preferredSchoolType }}
              </td>
              <td class="profile-property">
                <span class="property-title">Religion:</span>{{ profile.preferredReligion }}
              </td>
            </tr>
            <tr>
              <td class="profile-property">
                <span class="property-title">Accommodation:</span>{{ profile.preferredAccommodation }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </noe-section>
  </div>

  <noe-school-preferred-dialog #schoolPreferredDialog></noe-school-preferred-dialog>
</div>

<div class="card">
  <div class="card-block">
    <noe-section [header]="'Standard Test Scores'" [showAdd]="false" (onEdit)="onEditStdTestScores()">
      <hr class="mt-3">

      <div class="table-responsive">
        <table class="table borderless">
          <tbody>
            <tr>
              <td class="profile-property">
                <span class="property-title">iTep:</span>{{ profile.itep }}
              </td>
              <td class="profile-property">
                <span class="property-title">SLEP:</span>{{ profile.slep }}
              </td>
              <td class="profile-property">
                <span class="property-title">TOEFL Jr.:</span>{{ profile.toefljr }}
              </td>
            </tr>
            <tr>
              <td class="profile-property">
                <span class="property-title">TOEFL:</span>{{ profile.toefl }}
              </td>
              <td class="profile-property">
                <span class="property-title">SSAT:</span>{{ profile.ssat }}
              </td>
              <td class="profile-property">
                <span class="property-title">IELTS:</span>{{ profile.ielts }}
              </td>
            </tr>
            <tr>
              <td class="profile-property">
                <span class="property-title">GRE:</span>{{ profile.gre }}
              </td>
              <td class="profile-property">
                <span class="property-title">GMAT:</span>{{ profile.gmat }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </noe-section>
  </div>

  <noe-std-test-score-dialog #stdTestScoreDialog></noe-std-test-score-dialog>
</div>

<div class="card">
  <div class="card-block">
    <noe-section [header]="'Skills'" [showAdd]="true" (onAdd)="onAddNewSkill()" (onEdit)="onEditSkills()">
      <hr class="mt-3">

      <div class="row">
        <div class="col-auto profile-skill" *ngFor="let skill of profile.skills">{{ skill }}</div>
        <div class="col-auto" *ngIf="!hasSkills">No skills data available.</div>
      </div>
    </noe-section>
  </div>

  <noe-skill-add-dialog #skillAddDialog></noe-skill-add-dialog>
  <noe-skill-edit-dialog #skillEditDialog></noe-skill-edit-dialog>

  <div class="card-block">
    <noe-section [header]="'Interests'" [showAdd]="true" (onAdd)="onAddNewInterest()" (onEdit)="onEditInterests()">
      <hr class="mt-3">

      <div class="row">
        <div class="col-auto profile-interest" *ngFor="let interest of profile.interests">{{ interest }}</div>
        <div class="col-auto" *ngIf="!hasInterests">No interests data available.</div>
      </div>
    </noe-section>

    <noe-interest-add-dialog #interestAddDialog></noe-interest-add-dialog>
    <noe-interest-edit-dialog #interestEditDialog></noe-interest-edit-dialog>
  </div>
</div>

<div class="card">
  <div class="card-block">
    <noe-section [header]="'Passport Scans'" [showAdd]="false" (onEdit)="onEditPassportScans()">
      <hr class="mt-3">

      <div class="row">
        <div class="col">
          <div *ngFor="let passportScan of passportScans; trackBy: trackByKey">
            <img [src]="fileUrlFrom(passportScan)" class="passport-scan rounded pull-left" alt="Passport Scan">
          </div>
          <div class="required-materials" *ngIf="!hasPassportScans">Passport scans are required.</div>
        </div>
      </div>
    </noe-section>

    <noe-applying-file-edit-dialog #passportScanEditDialog
        [title]="'Edit passport scans'"
        [type]="'passport-scans'"
        [accept]="'image/*'">
    </noe-applying-file-edit-dialog>
  </div>

  <div class="card-block">
    <noe-section [header]="'Recommend Letters'" [showAdd]="false" (onEdit)="onEditRecommendLetters()">
      <hr class="mt-3">

      <div class="row">
        <div class="col-auto preview-container" *ngFor="let recommendation of recommendations; trackBy: trackByKey">
          <a [attr.href]="fileUrlFrom(recommendation)" class="">{{ nameOfApplyingFile(recommendation) }}</a>
          <div class="pdf-viewer-container">
            <pdf-viewer class="pdf-viewer"
                        [src]="fileUrlFrom(recommendation)"
                        [page]="1"
                        [stick-to-page]="true"
                        [show-all]="false"
                        [render-text]="false"
                        [original-size]="false"
                        [external-link-target]="'blank'">
            </pdf-viewer>
          </div>
        </div>
        <div class="col required-materials" *ngIf="!hasRecommendations">Recommend letters are required.</div>
      </div>
    </noe-section>

    <noe-applying-file-edit-dialog #recommendationEditDialog
            [title]="'Edit recommend letter'"
            [type]="'recommendations'">
    </noe-applying-file-edit-dialog>
  </div>

  <div class="card-block">
    <noe-section [header]="'Transcripts'" [showAdd]="false" (onEdit)="onEditTranscripts()">
      <hr class="mt-3">

      <div class="row">
        <div class="col-auto" *ngFor="let transcript of transcripts; trackBy: trackByKey">
          <a [attr.href]="fileUrlFrom(transcript)" class="">{{ nameOfApplyingFile(transcript) }}</a>
          <div class="pdf-viewer-container">
            <pdf-viewer class="pdf-viewer"
                        [src]="fileUrlFrom(transcript)"
                        [page]="1"
                        [stick-to-page]="true"
                        [show-all]="false"
                        [render-text]="false"
                        [original-size]="false"
                        [external-link-target]="'blank'">
            </pdf-viewer>
          </div>
        </div>
        <div class="col required-materials" *ngIf="!hasTranscripts">Transcripts are required.</div>
      </div>
    </noe-section>

    <noe-applying-file-edit-dialog #transcriptEditDialog
            [title]="'Edit transcripts'"
            [type]="'transcripts'">
    </noe-applying-file-edit-dialog>
  </div>

  <div class="card-block">
    <noe-section [header]="'Financial Info Documents'" [showAdd]="false" (onEdit)="onEditFinancialInfoDocs()">
      <hr class="mt-3">

      <div class="row">
        <div class="col-auto" *ngFor="let financialInfoDoc of financialInfoDocs; trackBy: trackByKey">
          <a [attr.href]="fileUrlFrom(financialInfoDoc)" class="">{{ nameOfApplyingFile(financialInfoDoc) }}</a>
          <div class="pdf-viewer-container">
            <pdf-viewer class="pdf-viewer"
                        [src]="fileUrlFrom(financialInfoDoc)"
                        [page]="1"
                        [stick-to-page]="true"
                        [show-all]="false"
                        [render-text]="false"
                        [original-size]="false"
                        [external-link-target]="'blank'">
            </pdf-viewer>
          </div>
        </div>
        <div class="col required-materials" *ngIf="!hasFinancialInfoDocs">Financial info documents are required.</div>
      </div>
    </noe-section>

    <noe-applying-file-edit-dialog #financialInfoDocEditDialog
            [title]="'Edit financial info documents'"
            [type]="'financial-info-docs'">
    </noe-applying-file-edit-dialog>
  </div>

  <div class="card-block">
    <noe-section [header]="'Supplements'" [showAdd]="false" (onEdit)="onEditSupplements()">
      <hr class="mt-3">

      <div class="row">
        <div class="col-auto" *ngFor="let supplement of supplements; trackBy: trackByKey">
          <a [attr.href]="fileUrlFrom(supplement)" class="">{{ nameOfApplyingFile(supplement) }}</a>
          <div class="pdf-viewer-container">
            <pdf-viewer class="pdf-viewer"
                        [src]="fileUrlFrom(supplement)"
                        [page]="1"
                        [stick-to-page]="true"
                        [show-all]="false"
                        [render-text]="false"
                        [original-size]="false"
                        [external-link-target]="'blank'">
            </pdf-viewer>
          </div>
        </div>
        <div class="col" *ngIf="!hasSupplements">Add more application supplements (If needed). </div>
      </div>
    </noe-section>

    <noe-applying-file-edit-dialog #supplementEditDialog
            [title]="'Edit supplements'"
            [type]="'supplements'">
    </noe-applying-file-edit-dialog>
  </div>
</div>
