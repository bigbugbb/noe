<div>
  <div class="top-margin"></div>

  <!-- {{ diagnostic }} -->

  <div class="card">
    <div class="card-block">
      <app-section [showAdd]="false" (onEdit)="onEditIntro()">
        <div class="row">
          <div class="col">
            <img class="rounded-circle profile-avatar img-thumbnail mx-auto d-block" [src]="profile.avatar" />
          </div>
        </div>
        <div class="row">
          <div class="col">
            <h4 class="profile-name">{{ profile.firstname }} {{ profile.lastname }}</h4>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <h6 class="current-grade">{{ profile.grade }} student</h6>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <h6 class="current-school-name">{{ profile.school }}</h6>
          </div>
        </div>

        <hr class="mt-3">

        <div class="table-responsive">
          <table class="table borderless">
            <tbody>
              <tr>
                <td class="profile-property">
                  <span class="property-title">Email:</span>{{ profile.email }}
                </td>
                <td class="profile-property">
                  <span class="property-title">Phone:</span>{{ profile.phone }}
                </td>
                <td class="profile-property">
                  <span class="property-title">Applying:</span>{{ profile.applying }}
                </td>
              </tr>
              <tr>
                <td class="profile-property">
                  <span class="property-title">Birthday:</span>{{ profile.birthday | date:'shortDate' }}
                </td>
                <td class="profile-property">
                  <span class="property-title">Gender:</span>{{ profile.gender | capitalize }}
                </td>
                <td class="profile-property">
                  <span class="property-title">Country:</span>{{ profile.country }}
                </td>
              </tr>
              <tr>
                <td class="profile-property">
                  <span class="property-title">Annual budget:</span>${{ profile.budget }}
                </td>
                <td class="profile-property">
                  <span class="property-title">GPA:</span>{{ profile.gpa }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <hr class="mt-3">

        <div class="row">
          <div class="col">
            <p>{{ profile.introduction }}</p>
          </div>
        </div>

        <!-- <p>
          <a class="show-more" data-toggle="collapse" href="#collapseMedia" aria-expanded="false" aria-controls="collapseMedia">
            <h6>Show more <i class="fa fa-chevron-down" aria-hidden="true"></i></h6>
          </a>
        </p> -->
        <!-- <div class="collapse" id="collapseMedia">
          <div style="overflow: auto">
            <div class="row-fluid">
                <div class="col-lg-4">media</div>
                <div class="col-lg-4">media</div>
                <div class="col-lg-4">media</div>
                <div class="col-lg-4">media</div>
                <div class="col-lg-4">media</div>
                <div class="col-lg-4">media</div>
                <div class="col-lg-4">media</div>
            </div>
          </div>
        </div> -->
      </app-section>
    </div>

    <intro-dialog #introDialog></intro-dialog>
  </div>

  <div class="card">
    <div class="card-block">
      <app-section [header]="'School Preferred'" [showAdd]="false" (onEdit)="onEditSchoolPreferred()">
        <hr class="mt-3">

        <div class="table-responsive">
          <table class="table borderless">
            <tbody>
              <tr>
                <td class="profile-property">
                  <span class="property-title">Location:</span>{{ profile.preferredSchoolLocation }}
                </td>
                <td class="profile-property">
                  <span class="property-title">Type:</span>{{ profile.preferredSchoolType }}
                </td>
                <td class="profile-property">
                  <span class="property-title">Religion:</span>{{ profile.preferredReligion }}
                </td>
              </tr>
              <tr>
                <td class="profile-property">
                  <span class="property-title">Accommodation:</span>{{ profile.preferredAccommodation }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </app-section>
    </div>

    <school-preferred-dialog #schoolPreferredDialog></school-preferred-dialog>
  </div>

  <div class="card">
    <div class="card-block">
      <app-section [header]="'Skills'" [showAdd]="true" (onAdd)="onAddNewSkill()" (onEdit)="onEditSkills()">
        <hr class="mt-3">

        <div class="row">
          <div class="col-auto profile-skill" *ngFor="let skill of profile.skills">{{ skill }}</div>
          <div class="col-auto" *ngIf="!hasSkills">No skills data available.</div>
        </div>
      </app-section>
    </div>

    <skill-add-dialog #skillAddDialog></skill-add-dialog>
    <skill-edit-dialog #skillEditDialog></skill-edit-dialog>

    <div class="card-block">
      <app-section [header]="'Interests'" [showAdd]="true" (onAdd)="onAddNewInterest()" (onEdit)="onEditInterests()">
        <hr class="mt-3">

        <div class="row">
          <div class="col-auto profile-interest" *ngFor="let interest of profile.interests">{{ interest }}</div>
          <div class="col-auto" *ngIf="!hasInterests">No interests data available.</div>
        </div>
      </app-section>

      <interest-add-dialog #interestAddDialog></interest-add-dialog>
      <interest-edit-dialog #interestEditDialog></interest-edit-dialog>
    </div>
  </div>

  <div class="card">
    <div class="card-block">
      <app-section [header]="'Passport Scans'" [showAdd]="false" (onEdit)="onEditPassportScans()">
        <hr class="mt-3">

        <div class="row">
          <div class="col">
            <div *ngFor="let passportScan of passportScans">
              <img [src]="fileUrlFrom(passportScan)" class="passport-scan rounded pull-left" alt="Passport Scan">
            </div>
            <div *ngIf="!hasPassportScans">Passport scans are required.</div>
          </div>
        </div>
      </app-section>

      <passport-scan-edit-dialog #passportScanEditDialog></passport-scan-edit-dialog>
    </div>

    <div class="card-block">
      <app-section [header]="'Recommendations'" [showAdd]="false" (onEdit)="onEditRecommendations()">
        <hr class="mt-3">

        <div class="row">
          <div class="col-auto" *ngFor="let recommendation of recommendations">
            <a [attr.href]="fileUrlFrom(recommendation)" class="">{{ filenameFrom(recommendation) }}</a>
          </div>
          <div class="col" *ngIf="!hasRecommendations">Recommendations are required.</div>
        </div>
      </app-section>

      <applying-file-edit-dialog #recommendationEditDialog
              [title]="'Edit recommendations'"
              [type]="'recommendations'"
              [addButtonText]="'Add recommendation'">
      </applying-file-edit-dialog>
    </div>

    <div class="card-block">
      <app-section [header]="'Transcripts'" [showAdd]="false" (onEdit)="onEditTranscripts()">
        <hr class="mt-3">

        <div class="row">
          <div class="col-auto" *ngFor="let transcript of transcripts">
            <a [attr.href]="fileUrlFrom(transcript)" class="">{{ filenameFrom(transcript) }}</a>
          </div>
          <div class="col" *ngIf="!hasTranscripts">Transcripts are required.</div>
        </div>
      </app-section>

      <applying-file-edit-dialog #transcriptEditDialog
              [title]="'Edit transcripts'"
              [type]="'transcripts'"
              [addButtonText]="'Add transcript'">
      </applying-file-edit-dialog>
    </div>

    <div class="card-block">
      <app-section [header]="'Financial Info Documents'" [showAdd]="false" (onEdit)="onEditFinancialInfoDocs()">
        <hr class="mt-3">

        <div class="row">
          <div class="col-auto" *ngFor="let financialInfoDoc of financialInfoDocs">
            <a [attr.href]="fileUrlFrom(financialInfoDoc)" class="">{{ filenameFrom(financialInfoDoc) }}</a>
          </div>
          <div class="col" *ngIf="!hasFinancialInfoDocs">Financial info documents are required.</div>
        </div>
      </app-section>

      <applying-file-edit-dialog #financialInfoDocEditDialog
              [title]="'Edit financial info documents'"
              [type]="'financial-info-docs'"
              [addButtonText]="'Add financial info document'">
      </applying-file-edit-dialog>
    </div>

    <div class="card-block">
      <app-section [header]="'Supplements'" [showAdd]="false" (onEdit)="onEditSupplements()">
        <hr class="mt-3">

        <div class="row">
          <div class="col-auto" *ngFor="let supplement of supplements">
            <a [attr.href]="fileUrlFrom(supplement)" class="">{{ filenameFrom(supplement) }}</a>
          </div>
          <div class="col" *ngIf="!hasSupplements">You can add application supplements (If needed). </div>
        </div>
      </app-section>

      <applying-file-edit-dialog #supplementEditDialog
              [title]="'Edit supplements'"
              [type]="'supplements'"
              [addButtonText]="'Add supplement'">
      </applying-file-edit-dialog>
    </div>
  </div>


</div>