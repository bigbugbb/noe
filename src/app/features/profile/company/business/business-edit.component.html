<div class="top-margin"></div>

<div class="card">
  <div class="card-block">
    <noe-section class="col" [header]="'Business Info'" [showAdd]="false" (onEdit)="onEditBusinessInfo()">
      <hr class="mt-3">
      <table class="table">
        <tbody>
          <tr>
            <td width="32%" class="td-no-border">
              <img class="business-img" [src]="model.avatar"/>
            </td>
            <td width="68%" class="td-no-border business-info">
              <div>
                <h4>{{ name }}</h4>
                <div *ngIf="location.length > 0" class="location"><i class="fa fa-location-arrow location-icon" aria-hidden="true"></i>{{ location }}</div>
              </div>
              <div class="summary">{{ summary }}</div>
              <div>
                <div class="business-price-container">
                  <span class="price-title">Price</span>
                  <span class="price">{{ price }}</span>
                </div>
                <button class="btn btn-primary btn-book">Book</button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <noe-business-info-edit-dialog #infoEditDialog></noe-business-info-edit-dialog>
    </noe-section>

    <div class="row">
      <noe-section class="col" [header]="'Business Content'" [showAdd]="false" [showEdit]="false">
        <hr class="mt-3">
        <div *ngIf="!editingContent" class="alert alert-primary edit-content-alert" role="alert">
          <span>Customize your business content!</span>
          <button class="btn btn-primary btn-edit-content" (click)="onEditBusinessContent()">
            Edit Content
          </button>
        </div>
        <div *ngIf="editingContent" class="alert alert-primary edit-content-alert" role="alert">
          <span>Save your customized content!</span>
          <button class="btn btn-primary btn-edit-content" (click)="onSaveBusinessContent()">
            Save Content
          </button>
        </div>
        <ckeditor
          *ngIf="editingContent"
          id="ckeditor"
          [(ngModel)]="model.content"
          [readonly]="false"
          (change)="onChange($event)"
          (ready)="onReady($event)"
          (focus)="onFocus($event)"
          (blur)="onBlur($event)"
          debounce="500">
        </ckeditor>
        <div *ngIf="!editingContent" [innerHTML]="content | safeHtml"></div>
      </noe-section>
    </div>
  </div>
</div>